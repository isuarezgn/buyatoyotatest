var taglist={"F25X1":{"pageName":"<site>:<section>:<subsection>:<page>","events":"<events>","prop14":"<site>:<section>:<page>","channel":"<site>:<section>","prop9":"<model_name>","prop19":"<breakpoint>","prop12":"<tda>","prop27":"<site>:<section>","prop11":"<site>:<section>:<subsection>"},"F25X41":{"prop12":"<tda>","prop27":"<site>:<section>","pageName":"<site>:<section>:<subsection>:<page>","prop19":"<breakpoint>","channel":"<site>:<section>","prop9":"<model_name>","prop11":"<site>:<section>:<subsection>","prop14":"<site>:<section>:<page>","prop2":"<model_year>","prop5":"<model_trim>","prop10":"<overlay_shown>","events":"event13"},"F25X49":{"linkName":"<site>:<section>:<subsection>:<link_name>","prop19":"<breakpoint>","prop49":"<tile_position>","prop16":"<dealer_code>","prop2":"<model_year>","prop29":"<current_pagename>","prop68":"<offer_title>","linkType":"o","events":"event5","prop12":"<tda>","prop17":"<site>:<section>:<link_name>","prop9":"<model_name>","prop20":"<dealer_name>","prop67":"<offer_type>"},"F25X51":{"pageName":"<site>:<section>:<subsection>:<page>","prop14":"<site>:<section>:<page>","prop27":"<site>:<section>","prop11":"<site>:<section>:<subsection>","prop12":"<tda>","prop19":"<breakpoint>","events":"event21,event67","channel":"<site>:<section>"},"F25X52":{"pageName":"<site>:<section>:<subsection>:<page>","prop12":"<tda>","prop19":"<breakpoint>","prop11":"<site>:<section>:<subsection>","channel":"<site>:<section>","events":"event52,event67","prop27":"<site>:<section>","prop14":"<site>:<section>:<page>"},"F25X53":{"pageName":"<site>:<section>:<subsection>:<page>","prop27":"<site>:<section>","prop19":"<breakpoint>","events":"event53,event67","prop14":"<site>:<section>:<page>","prop11":"<site>:<section>:<subsection>","prop12":"<tda>","channel":"<site>:<section>"},"F25X84":{"linkName":"<site>:<section>:<subsection>:<page>:<link_name>","events":"event9","prop2":"<model_year>","prop5":"<model_trim>","prop9":"<model_name>","prop12":"<tda>","prop16":"<dealer_code>","prop17":"<site>:<section>:<subsection>:<page>","prop19":"<breakpoint>","prop26":"<trim_detail>","prop29":"<current_pagename>","linkType":"o"},"F25X86":{"prop29":"<current_pagename>","prop2":"<model_year>","prop56":"<error_message>","linkName":"<site>:<section>:<subsection>:<page>:<linkname>","prop9":"<model_name>","prop67":"<offer_type>","prop17":"<site>:<section>:<subsection>:<page>","prop12":"<tda>","prop5":"<model_trim>","linkType":"o","prop19":"<breakpoint>"},"F25X81":{"pageName":"<site>:<section>:<subsection>:<page>","prop14":"<site>:<section>:<page>","prop27":"<site>:<section>","prop19":"<breakpoint>","prop11":"<site>:<section>:<subsection>","channel":"<site>:<section>","prop10":"<overlay_shown>","prop12":"<tda>"},"F25X82":{"prop19":"<breakpoint>","prop65":"<trade_model>","events":"event32","prop64":"<trade_make>","prop27":"<site>:<section>","prop10":"<overlay_shown>","prop12":"<tda>","pageName":"<site>:<section>:<subsection>:<page>","prop11":"<site>:<section>:<subsection>","prop62":"<trade_year>","channel":"<site>:<section>","prop66":"<transction_ID>","prop14":"<site>:<section>:<page>"},"F25X83":{"prop11":"<site>:<section>:<subsection>","events":"event44","prop19":"<breakpoint>","prop27":"<site>:<section>","prop10":"<overlay_shown>","channel":"<site>:<section>","prop14":"<site>:<section>:<page>","pageName":"<site>:<section>:<subsection>:<page>","prop12":"<tda>"}}
require(['jquery','storageUtil','global','zipTools','detectizr'],function($){var com=window.com||{};com.tms=com.tms||{};com.tms.bat=com.tms.bat||{};com.tms.bat.c2=com.tms.bat.c2||{};window.com=com;(function(c2,$){c2.PageManager=(function(){var pageState={},prevState={},changed=false,changedTO=null;function updateState(key,newValue,forceSync){prevState[key]=pageState[key];pageState[key]=newValue;if(forceSync){triggerChange();}else{flagChaged();}}function getState(key){if(key){return pageState[key];}else{return pageState;}}function flagChaged(){if(!changedTO){var f=c2.utils.createBoundListener(this,triggerChange);changedTO=setTimeout(f,16);}}function triggerChange(){clearTimeout(changedTO);changedTO=null;var evt=$.Event("PAGE_VALUE_UPDATED");evt.newState=pageState;evt.oldState=prevState;$(document).trigger(evt);prevState={};}function init(){var initial_page_state=$(".analytics").data("initialState");try{var initial_page_state=$(".analytics").data("initialState");pageState=initial_page_state||{};}catch(err){}}init();return{updateState:updateState,getState:getState,};})();c2.utils=c2.utils||{};c2.utils.createBoundListener=function(scope,func){return function(evt){if(scope&&typeof func==="function"){func.call(scope,evt);}};};c2.utils.getRequestParameter=function(parameterName,defaultValue){if(parameterName=(new RegExp('[?&]'+encodeURIComponent(parameterName)+'=([^&]*)')).exec(location.search)){return decodeURIComponent(parameterName[1]);}else{return defaultValue;}};c2.utils.triggerEvent=function($rootElement,type,data){var compEvent=$.Event(type),$re;compEvent.comp={};compEvent.comp.data=data||{};compEvent.comp.type=type;;$re=$rootElement||$(document);$($re).trigger(compEvent);};c2.AnalyticsManager=(function(){var kpiMap={"kpi_raq_shown":"event92,event88","kpi_raq_start":"event21,event67","kpi_raq_submit":"","kpi_raq_error":"","kpi_raq_complete":"event1,event68","kpi_cad_shown":"event90,event88","kpi_cad_start":"event52,event67","kpi_cad_submit":"","kpi_cad_error":"","kpi_cad_complete":"event55,event68","kpi_satd_shown":"event91,event88","kpi_satd_start":"event53,event67","kpi_satd_submit":"","kpi_satd_error":"","kpi_satd_complete":"event54,event68","kpi_click_to_dealer":"event5","kpi_click_to_call":"event9","kpi_view_inventory_details":"event13","kpi_view_offer_details":"event93","kpi_pe_error":"","kpi_pe_shown":"","kpi_pe_start":"event24","kpi_pe_results":"event25","kpi_fad_error":"","kpi_fad_shown":"","kpi_fad_start":"","kpi_fad_results":"event2"};var suppressPageLoadsRE=/\/trade-in-value\//i;function handlePageEvent(evt){evt.stopImmediatePropagation();var state=c2.PageManager.getState();var eventData=evt.comp.data;var idMap;var specificID="";var data;if(!eventData){return;}data=getPageData();data=$.extend(true,{},state,data);window.omni_page_var=window.omni_page_var||{};switch(evt.type){case"PAGE_LOAD":if(!window.location.pathname.match(suppressPageLoadsRE)){updateCurrentPageName(data);triggerAnalyticsPageEvent("25.1",evt.type,data);}else{window.omni_page_var=$.extend(true,window.omni_page_var,convertToDV(data));}break;case"LINK_CLICK":break;case"EXT_LINK_CLICK":triggerUntaggedClickEvent(evt.type,data,eventData);break;case"CLICK_TO_CALL":eventData.link_name="call_dealer";triggerAnalyticsClickEvent("25.84",evt.type,data,eventData);break;case"CLICK_TO_DEALER":eventData.link_name="visit_dealer_website";triggerAnalyticsClickEvent("25.49",evt.type,data,eventData);break;case"FORM_START":idMap={"raq":"25.51","cad":"25.52","satd":"25.53"};triggerAnalyticsClickEvent(idMap[eventData.componentType],evt.type,data,eventData);break;case"FORM_SUBMIT_ERROR":break;case"FORM_SUBMIT_VALID":break;default:}}function updateCurrentPageName(data){var pagename=data.site+":"+data.section+":"+data.subsection+":"+data.page;if(pagename.match(/^:|::|:$/g)){pagename=pagename.replace(/:+/g,":").replace(/(^:|:$)/g,"")}if(pagename.match(/^_|__|_$/g)){pagename=pagename.replace(/_+/g,"_").replace(/(^_|_$)/g,"")}c2.PageManager.updateState("current_pagename",pagename);data.current_pagename=pagename;}var pageKPIs=[];function addPageKPI(type){pageKPIs.push(type);}function resolveKPIsToEvents(){var eventMap={},events=pageKPIs.join(",").split(",");for(var i=0,len=events.length;i<len;i++){eventMap[events[i]]=true;}events=[];for(event in eventMap){events.push(kpiMap[event])}return events.sort().join(",");}function triggerAnalyticsPageEvent(id,type,pageData){var dv=convertToDV(pageData);$.extend(true,window.omni_page_var,dv);window.omni_page_var["<model_name>"]=window.omni_page_var["<offer_model>"]||window.omni_page_var["<series>"]||"";dv["<events>"]=resolveKPIsToEvents()
pageData.kpis=pageKPIs;updateDataLayer(pageData);if(typeof fireTagC2==="function"){fireTagC2(id,dv);}else{console.log("fireTag (debug)",id,dv);}c2.utils.triggerEvent(document,"BAT_ANALYTICS_EVENT",{type:type,page:pageData});pageKPIs=[];}function triggerAnalyticsClickEvent(id,type,pageData,eventData){var dv=$.extend(true,{},pageData,eventData);dv=convertToDV(dv);updateDataLayer(pageData,eventData);if(typeof fireTagC2==="function"){fireTagC2(id,dv);}else{console.log("fireTag (debug)",id,dv);}c2.utils.triggerEvent(document,"BAT_ANALYTICS_EVENT",{type:type,page:pageData,event:eventData});pageKPIs=[];}function triggerUntaggedClickEvent(type,pageData,eventData){var dv=$.extend(true,{},pageData,eventData);dv=convertToDV(dv);updateDataLayer(pageData,eventData);c2.utils.triggerEvent(document,"BAT_ANALYTICS_EVENT",{type:type,page:pageData,event:eventData});pageKPIs=[];}function updateDataLayer(pageData,eventData){var digitalData=window.digitalData=window.digitalData||{};digitalData.pageData=$.extend(true,digitalData.pageData,pageData);digitalData.events=digitalData.events||[];if(eventData){digitalData.events.push(eventData);}}function addUserInteraction(eventData){var digitalData=window.digitalData=window.digitalData||{};digitalData.events=digitalData.events||[];digitalData.events.unshift(eventData);}function getKPIs(){var kpis=[];for(kpi in kpiMap){kpis.push(kpi);}return kpis;}function addFormInteractionStartEvent(componentSelector,eventSelector,elementSelector){var defer=$.Deferred()
eventSelector=eventSelector||"click.first";elementSelector=elementSelector||"input,select,button,textarea,option,meter"
var selected=$(componentSelector);selected.each(function(index,element){console.log($(element),index);$(element).on(eventSelector,elementSelector,function(evt){$(element).off(eventSelector,elementSelector);defer.resolve(evt);})});return defer;}function convertToDV(obj){var dv={}
for(prop in obj){dv["<"+prop+">"]=obj[prop];}return dv;}function getPageData(){var loc=window.location;var data=parseDataFromUrl(loc);var xdata=transformData(data);var state=c2.PageManager.getState();xdata.breakpoint=getBreakPointFriendlyName(window.BREAKPOINT);xdata=$.extend(true,{},state,xdata);xdata.subsection=xdata.tda;return xdata;}function parseDataFromUrl(loc){var pathname=decodeURI(loc.pathname);var data={};var parts=pathname.split("/");parts.shift();data.language=parts.shift();data.section=parts.shift();data.page=parts.join(":");data.offerid=getQueryParam("offerid","",loc.search);if(data.offerid.match(/^misc/i)){data.offer_model="";data.offer_type="misc";}else{parts=data.offerid.split("_");data.offer_model=parts[0]||"";data.offer_type=parts[1]||"";}data.dealercode=getQueryParam("dealercode","",loc.search);data.series=getQueryParam("series","",loc.search);data.vehicleid=getQueryParam("vehicleid","",loc.search);data.year=getQueryParam("year","",loc.search);data.trimcode=getQueryParam("trimCode","",loc.search);data.duration=getQueryParam("duration","",loc.search);data.mileage=getQueryParam("mileage","",loc.search);data.pagesection=String(loc.hash).replace("#","");data.path=decodeURI(pathname+loc.search+loc.hash);return data;}function getQueryParam(param,argA,argB){var defaultValue,href,search,name,params,query,searchArray,item,segment,itemValue,values=[],typeA=typeof argA,typeB=typeof argB,UNDEF="undefined",loc=window.location;if(!param){return"";}if(typeA===UNDEF&&typeB===UNDEF){defaultValue="";href=loc.href;search=loc.search;}else if(typeA==="string"&&typeB===UNDEF){defaultValue="";href=argA;}else{defaultValue=argA;href=argB;}if(typeof search===UNDEF){loc=document.createElement('a');loc.href=href;search=loc.search;}if(search.charAt(0)==="?"){search=search.substr(1);}searchArray=search.split("&");query={};for(var i=searchArray.length;i;i--){segment=searchArray[i-1];if(segment){segment=segment.split("=");item=String(segment.shift()).toLowerCase();query[item]=segment.join("=");}}params=String(param).toLowerCase().split(",");for(i=0;i<params.length;i++){item=params[i];if(typeof query[item]==="string"){itemValue=query[item].replace(/\+/g," ");values.push(decodeURIComponent(itemValue));}}if(values.length===0){values.push(defaultValue);}return values.join("");}function getBreakPointFriendlyName(bp){var map={"lg":"desktop","md":"tablet","sm":"mobile"};return map[bp]||"unknown";}function transformData(data){var xd={};for(var p in data){xd[p]=data[p];}switch(data.section){case"":xd.section="home";break;case"inventory":case"payment-estimator":case"request-a-quote":case"schedule-a-test-drive":case"contact-dealer":if(!data.page){xd.page="";}break;case"offer-detail":xd.section="offer";if(data.offer_model){xd.page=data.offer_model+"_"+data.offer_type;}else{xd.page=data.offer_type;}break;case"dealer-detail":xd.section="dealers";xd.page=(data.pagesection)?("results-"+data.pagesection):"results-overview";break;}if(data.page==="thankyou"){xd.page="confirmation";}if(data.offer_type){if(data.offer_model){xd.page=data.offer_model+"_"+data.offer_type;}else{xd.page=data.offer_type;}}if(data.dealercode){xd.page=(data.pagesection)?("dealer-detail-"+data.pagesection):"dealer-detail-overview";}xd.subsection=xd.tda;return xd;}function init(){f=c2.utils.createBoundListener(c2.AnalyticsManager,c2.AnalyticsManager.handlePageEvent);$(document).on("PAGE_LOAD LINK_CLICK EXT_LINK_CLICK CLICK_TO_CALL CLICK_TO_DEALER FORM_START",f);}return{init:init,addPageKPI:addPageKPI,getKPIs:getKPIs,getPageData:getPageData,handlePageEvent:handlePageEvent,addFormInteractionStartEvent:addFormInteractionStartEvent}})();function getZip(){var zip=SU.getZip()||docCookies.getItem("zip");c2.PageManager.updateState("zip",zip);}function getTDA(){var tda=zipTools.getCurrentTDACode()||"";tda=(tda.toLowerCase()==="www")?"national":tda
c2.PageManager.updateState("tda",tda);}function getDeviceType(){var type=Detectizr.device.type||"unknown";c2.PageManager.updateState("device_type",type);}function getStoredData(){var value,map={"model":"model_trim","preferred_language":"preferred_language","series":"model_name","seriesName":"model_name","tempDealerCode":"dealer_code","year":"model_year"};for(var key in map){if(map[key]){value=SU.getSessionStorage(key);c2.PageManager.updateState(map[key],value);}}}function parseDataString(str){var items=str.split(",");var item;var data={};for(var i=items.length;item=items[i-1];i--){item=item.split(":");data[item[0].trim()]=item[1].trim();}return data;}function scrapePage(){if($("#request-a-quote").length>0){c2.AnalyticsManager.addPageKPI("kpi_raq_shown");c2.AnalyticsManager.addFormInteractionStartEvent("#request-a-quote").done(function(evt){c2.utils.triggerEvent(evt.delegateTarget,"FORM_START",{componentType:"raq"});});}if($("#contact-a-dealer").length>0){c2.AnalyticsManager.addPageKPI("kpi_cad_shown");c2.AnalyticsManager.addFormInteractionStartEvent("#contact-a-dealer").done(function(evt){c2.utils.triggerEvent(evt.delegateTarget,"FORM_START",{componentType:"cad"});});}if($("#schedule-test-drive").length>0){c2.AnalyticsManager.addPageKPI("kpi_satd_shown");c2.AnalyticsManager.addFormInteractionStartEvent("#schedule-test-drive").done(function(evt){console.log(evt);c2.utils.triggerEvent(evt.delegateTarget,"FORM_START",{componentType:"satd"});});}if($("#inventory-detail").length>0){c2.AnalyticsManager.addPageKPI("kpi_view_inventory_details");}if($("#offer-detail").length>0){c2.AnalyticsManager.addPageKPI("kpi_view_offer_details");}$(document).on("click","a[target='_blank'][href^='http']:not(#dealer-detail a,#dealer-search-page a,#dealer-detail a)",function(evt){c2.utils.triggerEvent(evt.delegateTarget,"EXT_LINK_CLICK",{"link_url":evt.currentTarget.origin,"link_name":evt.currentTarget.text});});if($("#confirmation").length>0){var type,path=window.location.pathname;if(path.match(/request/gi)){c2.AnalyticsManager.addPageKPI("kpi_raq_complete");}else if(path.match(/contact/gi)){c2.AnalyticsManager.addPageKPI("kpi_cad_complete");}else if(path.match(/schedule/gi)){c2.AnalyticsManager.addPageKPI("kpi_satd_complete");}else{console.log("unknow confirmation");}getStoredData();}$("#dealer-search-page").on("click","#search-result a[href^='http']",function(evt){var $panel=$(evt.currentTarget).parents(".result");var dataStr=$panel.find("[data-omni_data*='dealer_code']").data("omni_data");var data=parseDataString(dataStr);c2.utils.triggerEvent(evt.delegateTarget,"CLICK_TO_DEALER",data);});$("#dealer-search-page").on("click","#map-canvas a[href^='http']",function(evt){var $panel=$(evt.currentTarget).parents("#result");var dataStr=$panel.find("[data-omni_data*='dealer_code']").data("omni_data");var data=parseDataString(dataStr)
c2.utils.triggerEvent(evt.delegateTarget,"CLICK_TO_DEALER",data);});$("#dealer-detail").on("click","#contact-dealer-side-inner a[href^='http']",function(evt){var dataStr=$(evt.currentTarget).data("omni_data");var data=parseDataString(dataStr)
c2.utils.triggerEvent(evt.delegateTarget,"CLICK_TO_DEALER",data);});$("#dealer-search-panel").on("click","a[href^='http']",function(evt){var $panel=$(evt.currentTarget).parents(".result");var dataStr=$panel.find("[data-omni_data*='dealer_code']").data("omni_data");var data=parseDataString(dataStr)
c2.utils.triggerEvent(evt.delegateTarget,"CLICK_TO_DEALER",data);});if(c2.PageManager.getState("device_type")==="mobile"){$("#dealer-search-page").on("click.planb","#search-result .phone-number-new",function(evt){var $panel=$(evt.currentTarget).parents(".result");var dataStr=$panel.find("[data-omni_data*='dealer_code']").data("omni_data");var data=parseDataString(dataStr);c2.utils.triggerEvent(evt.delegateTarget,"CLICK_TO_CALL",data);});$("#dealer-search-page").on("click.planb","#map-canvas .phone-number-new",function(evt){var $panel=$(evt.currentTarget).parents("#result");var dataStr=$panel.find("[data-omni_data*='dealer_code']").data("omni_data");var data=parseDataString(dataStr)
c2.utils.triggerEvent(evt.delegateTarget,"CLICK_TO_CALL",data);});$("#dealer-detail").on("click.planb","#contact-dealer-side-inner .phone-number-new",function(evt){var dataStr=$(evt.currentTarget).parents("#dealer-detail").find("[data-omni_data*='dealer_code']").data("omni_data");var data=parseDataString(dataStr)
c2.utils.triggerEvent(evt.delegateTarget,"CLICK_TO_CALL",data);});}}var console=window.console;function hideConsole(){console=window.console;window.console={info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){},};}function init(){c2.AnalyticsManager.init();c2.PageManager.updateState("site","B");getZip();getTDA();getDeviceType();scrapePage();hideFireTag();c2.utils.triggerEvent(document,"PAGE_LOAD");}function dummyFireTag(id,dv){}function fireTagSim(id,dv){console.info("fireTagC2",id,dv);}function hideFireTag(){window.fireTag=dummyFireTag;}init();})(com.tms.bat.c2,jQuery);});if(window.bat&&bat.omni){bat.omni={init:function(){console.log(arguments)},bind:function(){console.log(arguments)},fire:function(){console.log(arguments)}}}if(window.dealerSpecials){window.dealerSpecials.clickSelectDealer=function(dealerCode,dealerUrl,dealerName,current){clickFlag=1;var state={};state.container='select_dealer_overlay';state.dealer_name=dealerName;state.dealer_code=dealerCode;try{com.tms.bat.c2.utils.triggerEvent(document,"CLICK_TO_DEALER",state);}catch(e){console.warn(e);}window.location.href='#'+dealerCode;window.open(dealerUrl,'_blank');}}var bat=window.bat||{};bat.omni=bat.omni||{};bat.omni.omni_click_handler=function(){};bat.omni.omni_select_handler=function(){};bat.omni.fire=function(){};bat.omni.init=function(){};